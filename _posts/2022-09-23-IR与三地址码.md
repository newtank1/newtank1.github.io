---
layout: post
title: IR与三地址码
date: 2022-09-23
tags: 软件分析
---

## 编译器与静态分析

源代码被编译为机器码的过程：

1. 通过Scanner进行词法分析，得到一系列Tokens
2. 通过Parser进行语法分析，得到抽象语法树AST
3. 通过Type Checker进行语义分析，得到增强AST
4. 通过转换器变成中间表示IR
5. **通过静态分析器进行静态分析，得到优化过的IR**
6. 通过代码生成器生成机器码

## AST与IR

AST的特点：

- 层次更高、更靠近语法结构
- 与语言有关
- 适合类型检查
- 缺少控制流信息

IR的特点：

- 层次更低、更靠近机器代码
- 一般与语言无关
- 较为精简
- 具有控制流信息
- 一般认为是静态分析的基础

## IR：三地址码（3AC）

三地址码（3AC）：等号右边只有最多一个操作符。

例如 t2 = a + b +3，转换为3AC即为：

1. t1 = a + b
2. t2 = t1 + 3

每个3AC语句最多包含三个“地址”。地址包含变量、常量、临时变量。