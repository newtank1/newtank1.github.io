---
layout: post
title: 云数据中心
date: 2022-09-26
tags: 云计算
---

## 云数据中心架构

物理机器->虚拟机->资源管理和分配->用户、代理商

### 管理的主要工作

- 服务请求监控
- 定价和计费
- 虚拟机监控器和分配器

### IaaS DaaS PaaS SaaS

- IaaS：计算、存储、网络设备
- DaaS：状态数据库
- PaaS：监控器、启动器、分配器、设备虚拟化
- SaaS：用户接口

## 云数据中心特征：

### 高设备利用率

- 通过虚拟化技术（服务器虚拟化、存储虚拟化、网络虚拟化、应用虚拟化）将云平台系统与数据中心硬件资源整合，减少物理服务器数量
- 优化资源利用率、简化管理，降低成本、快速响应需求变化
- 网络、存储、管理的单位运营成本更低

### 绿色节能

- 服务器本身：节能服务器、节能存储设备、刀片式服务器
- 环境：供电技术、散热技术
- 软件：虚拟机等资源调度算法、计算任务管理算法等

#### 高可用性

- 各个部分的冗余、容错、容灾
- 扩展和升级时保持正常运行

#### 自动化管理

- 无人值守、远程管理（系统漏洞与补丁管理、性能管理和瓶颈分析、服务器和操作系统部署、系统概率测量和调整）
- 门禁、通风、温度、湿度、电力均可远程调度和控制

## 云数据中心的部署

### 传统树结构

![](newtank1.github.io/assets/images/屏幕截图 2022-09-26 164315.png)

建造简单，但不利于拓展和升级，任意一个核心交换机故障都会导致上千台服务器失效。

例如当中间的核心交换机失效时，整个系统就被分为两块，导致资源无法进行流通。

### 改进型树结构

#### FatTree

##### 拓扑

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 164440.png)

1. K叉树，K个Pod，每个Pod有K个交换机，其中K/2个接入交换机，K/2个汇聚交换机
2. Pod中每个交换机有K个接口，K/2个接主机，K/2个接汇聚；K/2个接接入，K/2个接核心
3. 有（K/2）²个核心交换机，每个交换机K个端口接K个汇聚交换机
4. 一个Pod内的所有交换机两两相互连接
5. 一个Pod内的每个汇聚交换机与一部分核心交换机连接，但是一个Pod和每一个核心交换机都有连接

##### 特点

- 两级路由表，允许两级前缀查询：Pod间流量尽可能均匀分布于核心交换机。
- 任意两个不同Pod主机之间存在K条路径
  - 流量分散
  - 任意给定Pod的底层和高层交换机对位于本Pod的任意子网都有终结性表项
  - 在全负载最坏的情况下实现约87%的聚合带宽

##### 和传统树结构比较

- 消除了树形结构上层链路对吞吐量的限制
- 为内部节点间通信提供多条并行链路
- 与现有数据中心网络使用的以太网结构和IP配置的服务器兼容
- 布线更加复杂；扩展时需要重构；收到端口数限制

#### VL2

##### 拓扑

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 171136.png)

用多个小规模、低成本的单元，构建复杂、大规模的网络。

若干服务器连接到机架，每台接入交换机与两台汇聚交换机连接，每台汇聚交换机与所有核心交换机连接。

##### 特点

- 扁平寻址，允许服务实例被放在网络覆盖的任何地方
- 负载均衡将流量统一分配到网络路径
- 终端系统的地址解析拓展到巨大的服务器池

##### 核心思想

使用FatTree同样的拓扑结构建立扁平的第二层网络

##### 机制

- IP地址仅仅作为名字使用，没有拓扑含义；将服务器的名字与其位置分开
- 使用可扩展、可靠的目录系统来维持名字和位置间的映射
- 当服务器发送分组时，服务器上的VL2代理开启目录系统得到实际的目的地位置，然后将分组发送到目的地。

### 递归层次结构

#### Dcell

##### 拓扑

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 172006.png)

##### 特点

可扩展性好，拓扑层数受限于服务器端口数

#### FiConn

##### 拓扑

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 172127.png)

服务器使用两个网卡端口：主用端口连接底层网络，备用端口连接高层网络

递归定义的结构：

- 第0层，n个服务器用主用端口连接具有n个端口的交换机
- 每个低层结构中备用端口空闲的一半的服务器与其他相同层次的网络中备用端口空闲的服务器连接
- k层服务器、k层端口、k层链路

##### 特点

- 不需要对服务器和交换机做修改
- 对外连接的链路有限
- 容错较弱，路由效率不高

#### BCube

##### 拓扑

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 172757.png)

主要使用交换机构建层次化网络

- 第0层：n服务器连接1交换机
- 第1层：n个0层连接n个交换机
- 第k层：n个k-1层连接n$^k$个交换机

交换机n个端口，服务器k+1个端口

##### 特点

- 服务可用性高
- 探测的通信和计算开销大
- 有端口数目要求

### 光交换网络

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 173210.png)

在主干网络上架设光设备进行加强。

### 无线网络

![](https://newtank1.github.io/assets/images/屏幕截图 2022-09-26 173257.png)

在主干网络上架设无线设备进行加强。

### 软件定义网络

将网络层的控制平面和数据平面分离。

- 基础设施层：底层转发设备，根据规则进行传输单元的转发
- 控制器层：维护网络状态、控制转发规则
- 应用程序层：配置转发规则